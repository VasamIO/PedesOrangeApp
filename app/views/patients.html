<div id="patientPage" class="page">
	<header class="bar-title">
		<a ng-hide="a.selection==='PatientDetails'" class="button" ng-click="back()"  stop-event="click">
			<i class="icon-arrow-left icon-large"></i>
		</a>
		<h1 class="title" ng-swipe-right="back()">

		<i ng-show="a.loading || a.patients.loading || a.patientDetails.loading " class="icon-spinner icon-spin icon-large" style="display: none;"></i> 	{{a.pageTitle}}</h1>
		
		<a ng-if="a.selection==='PatientDetails'" class="button" ng-click="a.selection='Patients';closePopup()" stop-event="click">
			<i class="icon-remove icon-large"></i>
		</a>
	</header>

	
	<div class="content slide" ng-switch on="a.selection">
			
			<div class="tab" ng-switch-when="Patients" infinite-scroll="getMorePatients()" infinite-scroll-distance="10">
				<ul class="list inset">
					<li> Find:<input type = "text" style="margin-bottom:0px;height:35px"  placeholder="Name or Physician or Facility"  ng-model="searchText"></li>	
					<li ng-repeat="r in a.patients.data | filter:searchText">
						<a stop-event="click" ng-click="a.patients.current = r; a.selection='PatientDetails';" ng-swipe-right="a.patients.current = r; a.selection='PatientDetails';">
							<!-- <div>#{{$index + 1}} </div>
							<div><label class="field-text"><strong>Patient Name:</strong></label>{{r.patientName}}</div>
							<div><label class="field-text"><strong>Physician Name:</strong></label>{{r.physicianName}} 
							</div>
							<div><label class="field-text"><strong>Facility:</strong></label>{{r.facility}} </div>
					<div><label class="field-text"><strong>Date:</strong></label>{{r.creationDate | timeAgo}} <!-- {{r.uploadDocIds}}  </div>
							<span class="chevron"></span>
							 -->

						<div> <strong><i class="icon-user"></i> {{r.patientName}}</strong></div>
							<div style="margin-left:15px"><label class="field-text">referred by</label> {{r.physicianName}}</div>
							<div style="margin-left:15px">
									<span ng-if="r.facility =='nrb'">
									@ New Report Bearch
								</span>
								<span ng-if="r.facility =='cr'">
									@ Carolina	
								</span>
							</div>
							
							
					<div class = "rightaligndate" style="color:gray"><small>{{r.creationDate | date:'MM-dd-yyyy HH:mm'}}</small> <!-- {{r.uploadDocIds}} --> </div>
							<span class="chevron"></span>
							

						</a>
					</li>
					<li ng-show="a.patients.loading" style="text-align: center; display: none;"><i class="icon-spinner icon-spin icon-large"></i></li>
				</ul>
				<!--a ng-show="a.patients.hasMore" class="button-main button-block" ng-click="getMorepatients()">More</a-->
			</div>	


				<div class="tab" ng-switch-when="PatientDetails">
				<ul class="list inset form right" >

<popupnew></popupnew>
					<div ng-repeat="r in a.patientDetails.data">
					<div  ng-if="r.patientId == a.patients.current.patientId">		
						<li>
							<label class="field-text"><strong>Patient Name</strong></label>{{r.patientName}}
						</li>
						<li>
							<label class="field-text"><strong>Phone</strong></label>{{r.phone}}
						</li>
						<li>
							<label class="field-text"><strong>Facility</strong></label>
							<span ng-if="r.facility =='nrb'">
									New Report Bearch
								</span>
								<span ng-if="r.facility =='cr'">
										Carolina	
								</span>
						</li>

						
						<li class="list-divider">Category 1</li>
							

								<li ng-if="r.arterialDuplex =='Y'">
									 <input type="checkbox" name ="h" value="Y" checked="true" disabled /> Arterial
  
								</li>
						
								<li ng-if="r.venousDuplex =='Y'">
										<input type="checkbox" name ="h" value="Y" checked="true" disabled / > Venous
								</li>

						<li class="list-divider">Category 2</li>
						
								
								<li ng-if="r.ultraConsult =='Y'">
										<input type="checkbox" name ="h" value="Y" checked="true" disabled / > Ultrasound & Consultation	
								</li>
								<li ng-if="r.venogram =='Y'">
									<input type="checkbox" name ="h" value="Y" checked="true" disabled / > Venogram with possible intervention
								</li>
								
								<li ng-if="r.angiogram =='Y'"> 
									<input type="checkbox" name ="h" value="Y" checked="true" disabled / >Angiogram with possible intervention
								</li>
								<li ng-if="r.ultraConsult =='Y'">
									<input type="checkbox" name ="h" value="Y" checked="true" disabled / >Other
								</li>
							
						</li>
							<li class="list-divider">Inidications</li>
						
						

								<li ng-if="r.claudication =='Y'">
									<input type="checkbox" name ="h" value="Y" checked="true" disabled / >Claudication
								</li>
									
								<li ng-if="r.absentPulses =='Y'">
										<input type="checkbox" name ="h" value="Y" checked="true" disabled / >Decreased/Absent Pulses
								</li>
								
								<li ng-if="r.dvt =='Y'">
									<input type="checkbox" name ="h" value="Y" checked="true" disabled / >DVT
								</li>
								
								<li ng-if="r.pain =='Y'"> 
									<input type="checkbox" name ="h" value="Y" checked="true" disabled / >Pain
								</li>
								
								<li ng-if="r.interEvaluation =='Y'">
										<input type="checkbox" name ="h" value="Y" checked="true" disabled / >Post Intervention Evaluation
								</li>
								
								<li ng-if="r.pvd =='Y'">
									<input type="checkbox" name ="h" value="Y" checked="true" disabled / >PVD
								</li>
								
								<li ng-if="r.swelling =='Y'"> 
									<input type="checkbox" name ="h" value="Y" checked="true" disabled / >Swelling
								</li>
								
								<li ng-if="r.varicoseVeins =='Y'">
									<input type="checkbox" name ="h" value="Y" checked="true" disabled / >Varicose Veins
								</li>
								
								<li ng-if="r.ulcer =='Y'">
									<input type="checkbox" name ="h" value="Y" checked="true" disabled / >Ulcer
								</li>

						
					</div>
					</div>

					<li ng-show="a.patientDetails.loading" style="text-align: center; display: none;"><i class="icon-spinner icon-spin icon-large"></i></li>
				</ul>	
					<ul class="list inset form right" >

						
						<li class="list-divider">Documents</li>
						
						<li ng-hide="a.patients.current.uploadDocIds.length > 3">No documents uploaded.</li>
						<div ng-repeat="(key, value) in image_data">   
					<div  ng-if="key == a.patients.current.patientId">		
						
					<li class="border-box" style="display:block;height:100px;">
						<div id="doc-canvas" class="doc" style="position:absolute;left:0;top:0;right:0;bottom:0;display:block;">
							<span ng-repeat="im in value">
							<a ng-click="openPopup('{{$index}}')">	<img ng-src = "{{im}}" height="100" width="100"  /></a>
							</span>
				  
							</div>
					</li>
					
					</div>
					</div>
					<!-- <div ng-show="imageselected"> -->
					<div id="modal1"   ng-class="imageselected?'modal active':'modal'" style="margin-top:10px">
				  <header class="bar-title">
				    <h1 class="title">View Image</h1>
				    <a class="button"  ng-click="closePopup()">
				      Close
				    </a>
				  </header>
				  
				  <div class="content content-padded">
				   <div ng-repeat="(key, value) in image_data">   
					<div  ng-if="key == a.patients.current.patientId">		
					
								<img ng-src = "{{value[imageselected.urlIndex]}}" />
					
				  </div>
				</div>
					</div>
				</div>
			<!-- </div> -->
					<li ng-show="a.patientDetails.imagesloading" style="text-align: center; display: none;"><i class="icon-spinner icon-spin icon-large"></i></li>
				</ul>
				
				<ul class="list inset form right">
					<li class="list-divider">Texting</li>
					<li>
						<div><input type = "text" style="margin-bottom:0px;height:35px"  placeholder="Type something" ></div>
						<div>
							<a class="button"><i class="icon-meh"></i></a>
						</div>
						
					</li>

				</ul>
			</div>
			
		</div>
	</div>
</div>